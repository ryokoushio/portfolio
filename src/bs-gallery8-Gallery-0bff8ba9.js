define("@widget/GALLERY/bs-gallery8-Gallery-0bff8ba9.js",["exports","~/c/bs-dataAids"],(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var o=new Map,a=new WeakMap,i=0;function n(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(r=e.root)?(a.has(r)||(i+=1,a.set(r,i.toString())),a.get(r)):"0":e[t]);var r})).toString()}function l(e,t,r){if(void 0===r&&(r={}),!e)return function(){};var a=function(e){var t=n(e),r=o.get(t);if(!r){var a,i=new Map,l=new IntersectionObserver((function(t){t.forEach((function(t){var r,o=t.isIntersecting&&a.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=i.get(t.target))||r.forEach((function(e){e(o,t)}))}))}),e);a=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:l,elements:i},o.set(t,r)}return r}(r),i=a.id,l=a.observer,c=a.elements,s=c.get(e)||[];return c.has(e)||c.set(e,s),s.push(t),l.observe(e),function(){s.splice(s.indexOf(t),1),0===s.length&&(c.delete(e),l.unobserve(e)),0===c.size&&(l.disconnect(),o.delete(i))}}function c(e){return"function"!=typeof e.children}var s=function(e){var t,o;function a(t){var r;return(r=e.call(this,t)||this).node=null,r._unobserveCb=null,r.handleNode=function(e){r.node&&(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),c(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!t.initialInView,entry:void 0},r}o=e,(t=a).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o;var i=a.prototype;return i.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},i.componentWillUnmount=function(){this.unobserve(),this.node=null},i.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,r=e.root,o=e.rootMargin,a=e.trackVisibility,i=e.delay;this._unobserveCb=l(this.node,this.handleChange,{threshold:t,root:r,rootMargin:o,trackVisibility:a,delay:i})}},i.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},i.render=function(){if(!c(this.props)){var e=this.state,t=e.inView,o=e.entry;return this.props.children({inView:t,entry:o,ref:this.handleNode})}var a=this.props,i=a.children,n=a.as,l=a.tag,s=function(e,t){if(null==e)return{};var r,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(a,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(global.React||guac.react).createElement(n||l||"div",r({ref:this.handleNode},s),i)},a}((global.React||guac.react).Component);s.displayName="InView",s.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};const{Link:g}=(global.Core||guac["@wsb/guac-widget-core"]).components,p=({caption:e})=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"accent",section:"overlay",style:{background:"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.75))",padding:"small",paddingTop:"medium",position:"absolute",width:"100%",bottom:"0px","@md":{padding:"medium",paddingTop:"large"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{tag:"figcaption",richtext:!0},e));p.propTypes={caption:(global.PropTypes||guac["prop-types"]).string};const u=({uniformHeight:e,imageData:r,caption:o,externalLink:a,...i})=>{const[n,c]=function(e){var t=void 0===e?{}:e,r=t.threshold,o=t.delay,a=t.trackVisibility,i=t.rootMargin,n=t.root,c=t.triggerOnce,s=t.skip,g=t.initialInView,p=(global.React||guac.react).useRef(),u=(global.React||guac.react).useState({inView:!!g}),d=u[0],b=u[1],h=(global.React||guac.react).useCallback((function(e){void 0!==p.current&&(p.current(),p.current=void 0),s||e&&(p.current=l(e,(function(e,t){b({inView:e,entry:t}),t.isIntersecting&&c&&p.current&&(p.current(),p.current=void 0)}),{root:n,rootMargin:i,threshold:r,trackVisibility:a,delay:o}))}),[Array.isArray(r)?r.toString():r,n,i,c,s,a,o]);(global.React||guac.react).useEffect((function(){p.current||!d.entry||c||s||b({inView:!!g})}));var y=[h,d.inView,d.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}({threshold:0}),s={opacity:c?1:0,display:"block",transition:"opacity .5s ease-in-out",width:e?"auto":"95vw",height:e?"38vh":"auto",maxHeight:"100%","@md":{width:e?"auto":"35vw",height:e?"50vh":"auto"}},u=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Image,t._({},i,{imageData:{...r,outputWidth:600},style:s}));return(global.React||guac.react).createElement("figure",{ref:n,style:{margin:0,padding:0,flexShrink:0,position:"relative",marginRight:e?"16px":"24px"}},a?(global.React||guac.react).createElement(g,{linkData:a},u):u,o&&(global.React||guac.react).createElement(p,{caption:o}))};u.propTypes={caption:(global.PropTypes||guac["prop-types"]).string,uniformHeight:(global.PropTypes||guac["prop-types"]).bool,imageData:(global.PropTypes||guac["prop-types"]).object,externalLink:(global.PropTypes||guac["prop-types"]).object};const d={box:{display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"auto",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},indicator:{display:"none",height:"2px",width:"24px",background:"currentColor",margin:"4px",marginTop:"medium",borderRadius:"2px",cursor:"pointer",position:"relative",":after":{content:"''",display:"block",position:"absolute",top:"-16px",bottom:"-16px",left:"0px",right:"0px",padding:"4px"},"@md":{display:"block"}}},b={flexShrink:0,width:"24px",minHeight:"1px","@md":{width:"calc((100vw / 2) - (984px / 2) + 24px)"},"@lg":{width:"calc((100vw / 2) - (1160px / 2) + 24px)"},"@xl":{width:"calc((100vw / 2) - (1280px / 2) + 24px)"}},h=({style:e})=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{...b,...e}});function y({galleryImages:e,uniformWidthOrHeight:r}){const o=(global.React||guac.react).useRef(null),[a,i]=(global.React||guac.react).useState(0),[n,l]=(global.React||guac.react).useState(0),c=(global.React||guac.react).useCallback((({target:{scrollLeft:e,scrollWidth:t,offsetWidth:r}})=>{const o=a-1,i=(t-r)/o,c=Math.min(Math.floor(e/i),o);n!==c&&l(c)}),[a,n]);(global.React||guac.react).useEffect((()=>{const e=()=>{if(o.current){const e=Math.ceil(o.current.scrollWidth/o.current.offsetWidth);a!==e&&i(e)}},t=Array.from(document.querySelectorAll(".gallery-8-img"));return window.requestAnimationFrame(e),window.addEventListener("resize",e),t.forEach((t=>{t.addEventListener("load",e)})),()=>{window.removeEventListener("resize",e),t.forEach((t=>{t.removeEventListener("load",e)}))}}),[e,a]);const s="uniformHeight"===r;return(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement("div",{ref:o,onScroll:c,style:d.box},(global.React||guac.react).createElement(h,null),e.map((({image:e,caption:r,externalLink:o},a)=>{const i={uniformHeight:s,caption:r,externalLink:o,className:"gallery-8-img",style:{cursor:"pointer"},imageData:e,"data-aid":t.g(a),...t.a(a,{isImage:!0})};return(global.React||guac.react).createElement(u,t._({key:a},i))})),(global.React||guac.react).createElement(h,{style:{width:s?"8px":0}})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,null,a>1&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.HorizontalBox,{align:"middle"},Array.from({length:a}).map(((e,t)=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:t,style:{...d.indicator,color:t===n?"highContrast":"ultraLowContrast"},onClick:()=>{o.current.scrollLeft=o.current.scrollWidth/a*t}}))))))}h.propTypes={style:(global.PropTypes||guac["prop-types"]).object},y.propTypes={id:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,device:(global.PropTypes||guac["prop-types"]).string,galleryImages:(global.PropTypes||guac["prop-types"]).array.isRequired,renderAsThumbnail:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,size:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object,uniformWidthOrHeight:(global.PropTypes||guac["prop-types"]).string},e.default=y,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-gallery8-Gallery-0bff8ba9.js.map
